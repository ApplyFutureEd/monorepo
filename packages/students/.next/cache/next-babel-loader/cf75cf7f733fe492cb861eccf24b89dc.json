{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/paul/projects/applyfuture/students/packages/students/src/utils/hooks/useAuthenticatedUser.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Amplify, { Auth } from 'aws-amplify';\nimport { createContext, useContext, useEffect, useState } from 'react';\nimport config from './../../../../../aws-exports';\nconst AuthenticatedUserContext = /*#__PURE__*/createContext(null);\nexport const AuthenticatedUserProvider = props => {\n  const {\n    children\n  } = props;\n  const {\n    0: user,\n    1: setUser\n  } = useState(null);\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const user = await Auth.currentAuthenticatedUser();\n        setUser(user);\n        console.log('current session:', await Auth.currentSession());\n        console.log({\n          user\n        });\n      } catch (error) {\n        Amplify.configure(_objectSpread(_objectSpread({}, config), {}, {\n          aws_appsync_authenticationType: 'API_KEY'\n        }));\n        console.log('current session:', await Auth.currentSession());\n        console.log('auth provider', {\n          error\n        });\n      }\n    };\n\n    fetchData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthenticatedUserContext.Provider, {\n    value: user,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n};\n\nconst useAuthenticatedUser = () => useContext(AuthenticatedUserContext);\n\nexport default useAuthenticatedUser;","map":{"version":3,"sources":["/home/paul/projects/applyfuture/students/packages/students/src/utils/hooks/useAuthenticatedUser.tsx"],"names":["Amplify","Auth","createContext","useContext","useEffect","useState","config","AuthenticatedUserContext","AuthenticatedUserProvider","props","children","user","setUser","fetchData","currentAuthenticatedUser","console","log","currentSession","error","configure","aws_appsync_authenticationType","useAuthenticatedUser"],"mappings":";;;;;;;;;AAAA,OAAOA,OAAP,IAAkBC,IAAlB,QAA8B,aAA9B;AACA,SAASC,aAAT,EAAuCC,UAAvC,EAAmDC,SAAnD,EAA8DC,QAA9D,QAA8E,OAA9E;AAEA,OAAOC,MAAP,MAAmB,8BAAnB;AAYA,MAAMC,wBAAwB,gBAAGL,aAAa,CAA2B,IAA3B,CAA9C;AAEA,OAAO,MAAMM,yBAAoC,GAAIC,KAAD,IAAW;AAC3D,QAAM;AAAEC,IAAAA;AAAF,MAAeD,KAArB;AACA,QAAM;AAAA,OAACE,IAAD;AAAA,OAAOC;AAAP,MAAkBP,QAAQ,CAAC,IAAD,CAAhC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMS,SAAS,GAAG,YAAY;AAC1B,UAAI;AACA,cAAMF,IAAI,GAAG,MAAMV,IAAI,CAACa,wBAAL,EAAnB;AACAF,QAAAA,OAAO,CAACD,IAAD,CAAP;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgC,MAAMf,IAAI,CAACgB,cAAL,EAAtC;AAEAF,QAAAA,OAAO,CAACC,GAAR,CAAY;AAAEL,UAAAA;AAAF,SAAZ;AACH,OAND,CAME,OAAOO,KAAP,EAAc;AACZlB,QAAAA,OAAO,CAACmB,SAAR,iCACOb,MADP;AAEIc,UAAAA,8BAA8B,EAAE;AAFpC;AAIAL,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgC,MAAMf,IAAI,CAACgB,cAAL,EAAtC;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B;AAAEE,UAAAA;AAAF,SAA7B;AACH;AACJ,KAfD;;AAgBAL,IAAAA,SAAS;AACZ,GAlBQ,EAkBN,EAlBM,CAAT;AAoBA,sBACI,QAAC,wBAAD,CAA0B,QAA1B;AAAmC,IAAA,KAAK,EAAEF,IAA1C;AAAA,cACKD;AADL;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH,CA7BM;;AA+BP,MAAMW,oBAAoB,GAAG,MAAgClB,UAAU,CAACI,wBAAD,CAAvE;;AAEA,eAAec,oBAAf","sourcesContent":["import Amplify, { Auth } from 'aws-amplify';\nimport { createContext, FC, ReactNode, useContext, useEffect, useState } from 'react';\n\nimport config from './../../../../../aws-exports';\n\ntype AuthenticatedUser = {\n    attributes: {\n        email: string;\n    };\n};\n\ntype Props = {\n    children: ReactNode;\n};\n\nconst AuthenticatedUserContext = createContext<AuthenticatedUser | null>(null);\n\nexport const AuthenticatedUserProvider: FC<Props> = (props) => {\n    const { children } = props;\n    const [user, setUser] = useState(null);\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const user = await Auth.currentAuthenticatedUser();\n                setUser(user);\n                console.log('current session:', await Auth.currentSession());\n\n                console.log({ user });\n            } catch (error) {\n                Amplify.configure({\n                    ...config,\n                    aws_appsync_authenticationType: 'API_KEY'\n                });\n                console.log('current session:', await Auth.currentSession());\n                console.log('auth provider', { error });\n            }\n        };\n        fetchData();\n    }, []);\n\n    return (\n        <AuthenticatedUserContext.Provider value={user}>\n            {children}\n        </AuthenticatedUserContext.Provider>\n    );\n};\n\nconst useAuthenticatedUser = (): AuthenticatedUser | null => useContext(AuthenticatedUserContext);\n\nexport default useAuthenticatedUser;\n"]},"metadata":{},"sourceType":"module"}